{"ast":null,"code":"\"use client\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Cristina Aghei\\\\facultate\\\\licenta\\\\parteaPractica\\\\animals-shelter-app\\\\src\\\\components\\\\adoption.js\",\n  _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport { PawPrint, Search, Loader2, MapPin, LogOut } from \"lucide-react\";\nimport Button from \"./ui/Button\";\nimport Input from \"./ui/Input\";\n\n// The API base URL - adjust as needed for your environment\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = \"http://localhost:8083\";\nconst PetCard = ({\n  pet,\n  location,\n  onAdopt,\n  onFoster,\n  onDistantAdopt\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-full h-48 bg-gray-100 flex items-center justify-center\",\n    children: pet.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: pet.image || \"/placeholder.svg\",\n      alt: pet.name,\n      className: \"w-full h-48 object-cover\",\n      onError: e => {\n        e.target.src = \"/placeholder.svg?height=192&width=300\";\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 17,\n      columnNumber: 17\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-gray-400\",\n      children: \"F\\u0103r\\u0103 imagine\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 15,\n    columnNumber: 9\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-xl font-semibold mb-2\",\n      children: pet.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-1\",\n      children: [\"Specia: \", pet.species]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 mb-1\",\n      children: [\"Descrierea: \", pet.description]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-600 flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(MapPin, {\n        className: \"h-4 w-4 mr-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 17\n      }, this), location || \"Se încarcă locația...\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-wrap gap-2 mt-4\",\n      children: [/*#__PURE__*/_jsxDEV(Button, {\n        size: \"sm\",\n        className: \"bg-green-600 hover:bg-green-700\",\n        onClick: () => onAdopt(pet.id),\n        children: \"Adop\\u021Bie\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"sm\",\n        className: \"bg-blue-600 hover:bg-blue-700\",\n        onClick: () => onFoster(pet.id),\n        children: \"Foster\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        size: \"sm\",\n        className: \"bg-purple-600 hover:bg-purple-700\",\n        onClick: () => onDistantAdopt(pet.id),\n        children: \"Adop\\u021Bie la distan\\u021B\\u0103\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 9\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 14,\n  columnNumber: 5\n}, this);\n_c = PetCard;\nconst semanticSearch = async (query, topN = 10) => {\n  const response = await fetch(`${API_BASE_URL}/api/embeddings/semantic-search?query=${encodeURIComponent(query)}&topN=${topN}`, {\n    method: \"GET\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  if (!response.ok) throw new Error(\"Nu am putut efectua căutarea semantică\");\n  const data = await response.json();\n\n  // Parse the returned strings in format \"id | name | similarity\"\n  return data.map(item => {\n    const parts = item.split(\" | \");\n    return {\n      id: parts[0],\n      name: parts[1],\n      similarity: Number.parseFloat(parts[2])\n    };\n  });\n};\nconst fetchAnimalDetails = async animalIds => {\n  try {\n    // Fetch all animals\n    const response = await fetch(`${API_BASE_URL}/allAnimals`);\n    if (!response.ok) {\n      throw new Error(\"Network response was not ok\");\n    }\n    const allAnimals = await response.json();\n\n    // Filter only the animals that match our IDs\n    return allAnimals.filter(animal => animalIds.includes(animal.id));\n  } catch (error) {\n    console.error(\"Error fetching animal details:\", error);\n    return [];\n  }\n};\nconst AdoptionPage = () => {\n  _s();\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [pets, setPets] = useState([]);\n  const [isLoading, setIsLoading] = useState(false);\n  const [adoptionType, setAdoptionType] = useState(\"standard\");\n  const [locations, setLocations] = useState({});\n  const handleSearch = async e => {\n    e.preventDefault();\n    setIsLoading(true);\n    try {\n      // Get search results with IDs\n      const searchResults = await semanticSearch(searchQuery);\n      const animalIds = searchResults.map(result => result.id);\n\n      // Fetch full details for the animals\n      const animalDetails = await fetchAnimalDetails(animalIds);\n      setPets(animalDetails);\n\n      // Fetch locations for each animal\n      animalDetails.forEach(animal => {\n        if (animal.userId) {\n          fetchUserLocation(animal.id, animal.userId);\n        }\n      });\n    } catch (error) {\n      console.error(\"Error performing search:\", error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const fetchUserLocation = async (animalId, userId) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/users/${userId}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch user data\");\n      }\n      const userData = await response.json();\n      if (userData.location && userData.location.coordinates) {\n        const [longitude, latitude] = userData.location.coordinates;\n        fetchLocation(animalId, latitude, longitude);\n      }\n    } catch (error) {\n      console.error(`Error fetching user location for ${userId}:`, error);\n    }\n  };\n  const fetchLocation = async (animalId, latitude, longitude) => {\n    try {\n      const response = await fetch(`${API_BASE_URL}/reverse-geocode?latitude=${latitude}&longitude=${longitude}`);\n      if (!response.ok) {\n        throw new Error(\"Failed to fetch location\");\n      }\n      const address = await response.text();\n      setLocations(prevLocations => ({\n        ...prevLocations,\n        [animalId]: address\n      }));\n    } catch (error) {\n      console.error(\"Error fetching location:\", error);\n    }\n  };\n  const navigateToAdoption = animalId => {\n    window.location.href = `/book-adoption?animalId=${animalId}`;\n  };\n  const navigateToFostering = animalId => {\n    window.location.href = `/fostering?animalId=${animalId}`;\n  };\n  const navigateToDistantAdoption = animalId => {\n    window.location.href = `/distantAdoption?animalId=${animalId}`;\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"border-b\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container flex h-16 items-center justify-between px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/home\",\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(PawPrint, {\n            className: \"h-6 w-6 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl font-bold\",\n            children: \"PetPal Adoptions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"flex gap-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/home\",\n            children: \"Acas\\u0103\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 176,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/adoption\",\n            children: \"Adopt\\u0103 acum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/editor_catalog\",\n            children: \"Adaug\\u0103 anun\\u021B adop\\u021Bie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/info\",\n            children: \"\\xCEntreab\\u0103PetPal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 185,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/community\",\n            children: \"Al\\u0103tur\\u0103-te comunit\\u0103\\u021Bii\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"flex items-center gap-1 text-sm font-medium text-red-600 hover:text-red-700 transition-colors ml-2\",\n            onClick: () => {\n              console.log(\"Logging out\");\n              window.location.href = \"/login\";\n            },\n            children: [/*#__PURE__*/_jsxDEV(LogOut, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 29\n            }, this), \"Deconectare\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 191,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold mt-8 mb-6 text-center\",\n      children: \"G\\u0103se\\u0219te-\\u021Bi noul membru al familiei!\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-5xl mx-auto px-4 mb-8\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSearch,\n        className: \"flex flex-col gap-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid grid-cols-1 lg:grid-cols-12 gap-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative lg:col-span-7\",\n            children: [/*#__PURE__*/_jsxDEV(Search, {\n              className: \"absolute left-3 top-1/2 transform -translate-y-1/2 h-6 w-6 text-gray-400\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Input, {\n              id: \"searchQuery\",\n              value: searchQuery,\n              onChange: e => setSearchQuery(e.target.value),\n              placeholder: \"Ex: pisic\\u0103 bl\\xE2nd\\u0103, potrivit\\u0103 pentru familie cu copii\",\n              className: \"pl-12 py-4 text-lg w-full\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 212,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-3\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: adoptionType,\n              onChange: e => setAdoptionType(e.target.value),\n              className: \"w-full h-full px-3 py-4 text-base border rounded-md focus:outline-none focus:ring-2 focus:ring-green-600\",\n              \"aria-label\": \"Tip rela\\u021Bie\",\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"standard\",\n                children: \"Adop\\u021Bie permanent\\u0103\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"foster\",\n                children: \"Foster (temporar)\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"distant\",\n                children: \"Adop\\u021Bie la distan\\u021B\\u0103\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 221,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"lg:col-span-2\",\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              type: \"submit\",\n              disabled: isLoading,\n              className: \"w-full h-full py-4 px-6 text-lg bg-green-600 hover:bg-green-700 flex items-center justify-center\",\n              children: [isLoading ? /*#__PURE__*/_jsxDEV(Loader2, {\n                className: \"animate-spin w-6 h-6\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 46\n              }, this) : /*#__PURE__*/_jsxDEV(Search, {\n                className: \"w-6 h-6 mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 93\n              }, this), isLoading ? \"Căutare...\" : \"Caută\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 234,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm text-gray-600 mt-2\",\n          children: [adoptionType === \"standard\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Adop\\u021Bia permanent\\u0103 \\xEEnseamn\\u0103 c\\u0103 animalul va deveni pe deplin membrul familiei tale.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 248,\n            columnNumber: 29\n          }, this), adoptionType === \"foster\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Foster (temporar) - ofer\\u0103 un c\\u0103min temporar unui animal p\\xE2n\\u0103 c\\xE2nd acesta \\xEE\\u0219i g\\u0103se\\u0219te o familie permanent\\u0103.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 251,\n            columnNumber: 29\n          }, this), adoptionType === \"distant\" && /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"Adop\\u021Bia la distan\\u021B\\u0103 - sprijini financiar un animal care r\\u0103m\\xE2ne \\xEEn ad\\u0103post, primind actualiz\\u0103ri regulate.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-6xl mx-auto px-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\",\n        children: pets.map(pet => /*#__PURE__*/_jsxDEV(PetCard, {\n          pet: pet,\n          location: locations[pet.id],\n          onAdopt: navigateToAdoption,\n          onFoster: navigateToFostering,\n          onDistantAdopt: navigateToDistantAdoption\n        }, pet.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 17\n      }, this), pets.length === 0 && !isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mt-8 text-gray-600\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Nu ai g\\u0103sit ce cau\\u021Bi?\", \" \", /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/catalog\",\n            className: \"text-green-600 font-semibold\",\n            children: \"Vezi toate anun\\u021Burile\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 21\n      }, this), isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center mt-8\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin h-8 w-8 mx-auto text-green-600\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 290,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-2 text-gray-600\",\n          children: \"Se \\xEEncarc\\u0103 rezultatele...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 289,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 265,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 168,\n    columnNumber: 9\n  }, this);\n};\n_s(AdoptionPage, \"VZNvs00Y28oDOykNy3Sg6FTOFkk=\");\n_c2 = AdoptionPage;\nexport default AdoptionPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"PetCard\");\n$RefreshReg$(_c2, \"AdoptionPage\");","map":{"version":3,"names":["_jsxFileName","_s","$RefreshSig$","useState","PawPrint","Search","Loader2","MapPin","LogOut","Button","Input","jsxDEV","_jsxDEV","API_BASE_URL","PetCard","pet","location","onAdopt","onFoster","onDistantAdopt","className","children","image","src","alt","name","onError","e","target","fileName","lineNumber","columnNumber","species","description","size","onClick","id","_c","semanticSearch","query","topN","response","fetch","encodeURIComponent","method","headers","ok","Error","data","json","map","item","parts","split","similarity","Number","parseFloat","fetchAnimalDetails","animalIds","allAnimals","filter","animal","includes","error","console","AdoptionPage","searchQuery","setSearchQuery","pets","setPets","isLoading","setIsLoading","adoptionType","setAdoptionType","locations","setLocations","handleSearch","preventDefault","searchResults","result","animalDetails","forEach","userId","fetchUserLocation","animalId","userData","coordinates","longitude","latitude","fetchLocation","address","text","prevLocations","navigateToAdoption","window","href","navigateToFostering","navigateToDistantAdoption","log","onSubmit","value","onChange","placeholder","type","disabled","length","_c2","$RefreshReg$"],"sources":["C:/Users/Cristina Aghei/facultate/licenta/parteaPractica/animals-shelter-app/src/components/adoption.js"],"sourcesContent":["\"use client\"\r\n\r\nimport type React from \"react\"\r\n\r\nimport { useState } from \"react\"\r\nimport { PawPrint, Search, Loader2, MapPin, LogOut } from \"lucide-react\"\r\nimport Button from \"./ui/Button\"\r\nimport Input from \"./ui/Input\"\r\n\r\n// The API base URL - adjust as needed for your environment\r\nconst API_BASE_URL = \"http://localhost:8083\"\r\n\r\nconst PetCard = ({ pet, location, onAdopt, onFoster, onDistantAdopt }) => (\r\n    <div className=\"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow\">\r\n        <div className=\"w-full h-48 bg-gray-100 flex items-center justify-center\">\r\n            {pet.image ? (\r\n                <img\r\n                    src={pet.image || \"/placeholder.svg\"}\r\n                    alt={pet.name}\r\n                    className=\"w-full h-48 object-cover\"\r\n                    onError={(e) => {\r\n                        e.target.src = \"/placeholder.svg?height=192&width=300\"\r\n                    }}\r\n                />\r\n            ) : (\r\n                <div className=\"text-gray-400\">Fără imagine</div>\r\n            )}\r\n        </div>\r\n        <div className=\"p-4\">\r\n            <h2 className=\"text-xl font-semibold mb-2\">{pet.name}</h2>\r\n            <p className=\"text-gray-600 mb-1\">Specia: {pet.species}</p>\r\n            <p className=\"text-gray-600 mb-1\">Descrierea: {pet.description}</p>\r\n            <p className=\"text-gray-600 flex items-center\">\r\n                <MapPin className=\"h-4 w-4 mr-1\" />\r\n                {location || \"Se încarcă locația...\"}\r\n            </p>\r\n            <div className=\"flex flex-wrap gap-2 mt-4\">\r\n                <Button size=\"sm\" className=\"bg-green-600 hover:bg-green-700\" onClick={() => onAdopt(pet.id)}>\r\n                    Adopție\r\n                </Button>\r\n                <Button size=\"sm\" className=\"bg-blue-600 hover:bg-blue-700\" onClick={() => onFoster(pet.id)}>\r\n                    Foster\r\n                </Button>\r\n                <Button size=\"sm\" className=\"bg-purple-600 hover:bg-purple-700\" onClick={() => onDistantAdopt(pet.id)}>\r\n                    Adopție la distanță\r\n                </Button>\r\n            </div>\r\n        </div>\r\n    </div>\r\n)\r\n\r\nconst semanticSearch = async (query: string, topN = 10) => {\r\n    const response = await fetch(\r\n        `${API_BASE_URL}/api/embeddings/semantic-search?query=${encodeURIComponent(query)}&topN=${topN}`,\r\n        {\r\n            method: \"GET\",\r\n            headers: {\r\n                \"Content-Type\": \"application/json\",\r\n            },\r\n        },\r\n    )\r\n    if (!response.ok) throw new Error(\"Nu am putut efectua căutarea semantică\")\r\n    const data = await response.json()\r\n\r\n    // Parse the returned strings in format \"id | name | similarity\"\r\n    return data.map((item) => {\r\n        const parts = item.split(\" | \")\r\n        return {\r\n            id: parts[0],\r\n            name: parts[1],\r\n            similarity: Number.parseFloat(parts[2]),\r\n        }\r\n    })\r\n}\r\n\r\nconst fetchAnimalDetails = async (animalIds) => {\r\n    try {\r\n        // Fetch all animals\r\n        const response = await fetch(`${API_BASE_URL}/allAnimals`)\r\n        if (!response.ok) {\r\n            throw new Error(\"Network response was not ok\")\r\n        }\r\n        const allAnimals = await response.json()\r\n\r\n        // Filter only the animals that match our IDs\r\n        return allAnimals.filter((animal) => animalIds.includes(animal.id))\r\n    } catch (error) {\r\n        console.error(\"Error fetching animal details:\", error)\r\n        return []\r\n    }\r\n}\r\n\r\nconst AdoptionPage = () => {\r\n    const [searchQuery, setSearchQuery] = useState(\"\")\r\n    const [pets, setPets] = useState([])\r\n    const [isLoading, setIsLoading] = useState(false)\r\n    const [adoptionType, setAdoptionType] = useState(\"standard\")\r\n    const [locations, setLocations] = useState({})\r\n\r\n    const handleSearch = async (e: React.FormEvent) => {\r\n        e.preventDefault()\r\n        setIsLoading(true)\r\n        try {\r\n            // Get search results with IDs\r\n            const searchResults = await semanticSearch(searchQuery)\r\n            const animalIds = searchResults.map((result) => result.id)\r\n\r\n            // Fetch full details for the animals\r\n            const animalDetails = await fetchAnimalDetails(animalIds)\r\n            setPets(animalDetails)\r\n\r\n            // Fetch locations for each animal\r\n            animalDetails.forEach((animal) => {\r\n                if (animal.userId) {\r\n                    fetchUserLocation(animal.id, animal.userId)\r\n                }\r\n            })\r\n        } catch (error) {\r\n            console.error(\"Error performing search:\", error)\r\n        } finally {\r\n            setIsLoading(false)\r\n        }\r\n    }\r\n\r\n    const fetchUserLocation = async (animalId, userId) => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/users/${userId}`)\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to fetch user data\")\r\n            }\r\n            const userData = await response.json()\r\n\r\n            if (userData.location && userData.location.coordinates) {\r\n                const [longitude, latitude] = userData.location.coordinates\r\n                fetchLocation(animalId, latitude, longitude)\r\n            }\r\n        } catch (error) {\r\n            console.error(`Error fetching user location for ${userId}:`, error)\r\n        }\r\n    }\r\n\r\n    const fetchLocation = async (animalId, latitude, longitude) => {\r\n        try {\r\n            const response = await fetch(`${API_BASE_URL}/reverse-geocode?latitude=${latitude}&longitude=${longitude}`)\r\n            if (!response.ok) {\r\n                throw new Error(\"Failed to fetch location\")\r\n            }\r\n            const address = await response.text()\r\n            setLocations((prevLocations) => ({ ...prevLocations, [animalId]: address }))\r\n        } catch (error) {\r\n            console.error(\"Error fetching location:\", error)\r\n        }\r\n    }\r\n\r\n    const navigateToAdoption = (animalId) => {\r\n        window.location.href = `/book-adoption?animalId=${animalId}`\r\n    }\r\n\r\n    const navigateToFostering = (animalId) => {\r\n        window.location.href = `/fostering?animalId=${animalId}`\r\n    }\r\n\r\n    const navigateToDistantAdoption = (animalId) => {\r\n        window.location.href = `/distantAdoption?animalId=${animalId}`\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen\">\r\n            <header className=\"border-b\">\r\n                <div className=\"container flex h-16 items-center justify-between px-4\">\r\n                    <a href=\"/home\" className=\"flex items-center gap-2\">\r\n                        <PawPrint className=\"h-6 w-6 text-green-600\" />\r\n                        <span className=\"text-xl font-bold\">PetPal Adoptions</span>\r\n                    </a>\r\n                    <nav className=\"flex gap-6\">\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/home\">\r\n                            Acasă\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/adoption\">\r\n                            Adoptă acum\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/editor_catalog\">\r\n                            Adaugă anunț adopție\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/info\">\r\n                            ÎntreabăPetPal\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/community\">\r\n                            Alătură-te comunității\r\n                        </a>\r\n                        <button\r\n                            className=\"flex items-center gap-1 text-sm font-medium text-red-600 hover:text-red-700 transition-colors ml-2\"\r\n                            onClick={() => {\r\n                                console.log(\"Logging out\")\r\n                                window.location.href = \"/login\"\r\n                            }}\r\n                        >\r\n                            <LogOut className=\"h-4 w-4\" />\r\n                            Deconectare\r\n                        </button>\r\n                    </nav>\r\n                </div>\r\n            </header>\r\n\r\n            <h1 className=\"text-4xl font-bold mt-8 mb-6 text-center\">Găsește-ți noul membru al familiei!</h1>\r\n\r\n            <div className=\"max-w-5xl mx-auto px-4 mb-8\">\r\n                <form onSubmit={handleSearch} className=\"flex flex-col gap-4\">\r\n                    <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-4\">\r\n                        <div className=\"relative lg:col-span-7\">\r\n                            <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-6 w-6 text-gray-400\" />\r\n                            <Input\r\n                                id=\"searchQuery\"\r\n                                value={searchQuery}\r\n                                onChange={(e) => setSearchQuery(e.target.value)}\r\n                                placeholder=\"Ex: pisică blândă, potrivită pentru familie cu copii\"\r\n                                className=\"pl-12 py-4 text-lg w-full\"\r\n                            />\r\n                        </div>\r\n\r\n                        <div className=\"lg:col-span-3\">\r\n                            <select\r\n                                value={adoptionType}\r\n                                onChange={(e) => setAdoptionType(e.target.value)}\r\n                                className=\"w-full h-full px-3 py-4 text-base border rounded-md focus:outline-none focus:ring-2 focus:ring-green-600\"\r\n                                aria-label=\"Tip relație\"\r\n                            >\r\n                                <option value=\"standard\">Adopție permanentă</option>\r\n                                <option value=\"foster\">Foster (temporar)</option>\r\n                                <option value=\"distant\">Adopție la distanță</option>\r\n                            </select>\r\n                        </div>\r\n\r\n                        <div className=\"lg:col-span-2\">\r\n                            <Button\r\n                                type=\"submit\"\r\n                                disabled={isLoading}\r\n                                className=\"w-full h-full py-4 px-6 text-lg bg-green-600 hover:bg-green-700 flex items-center justify-center\"\r\n                            >\r\n                                {isLoading ? <Loader2 className=\"animate-spin w-6 h-6\" /> : <Search className=\"w-6 h-6 mr-2\" />}\r\n                                {isLoading ? \"Căutare...\" : \"Caută\"}\r\n                            </Button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div className=\"text-sm text-gray-600 mt-2\">\r\n                        {adoptionType === \"standard\" && (\r\n                            <p>Adopția permanentă înseamnă că animalul va deveni pe deplin membrul familiei tale.</p>\r\n                        )}\r\n                        {adoptionType === \"foster\" && (\r\n                            <p>\r\n                                Foster (temporar) - oferă un cămin temporar unui animal până când acesta își găsește o familie\r\n                                permanentă.\r\n                            </p>\r\n                        )}\r\n                        {adoptionType === \"distant\" && (\r\n                            <p>\r\n                                Adopția la distanță - sprijini financiar un animal care rămâne în adăpost, primind actualizări regulate.\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                </form>\r\n            </div>\r\n\r\n            <div className=\"max-w-6xl mx-auto px-4\">\r\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6\">\r\n                    {pets.map((pet) => (\r\n                        <PetCard\r\n                            key={pet.id}\r\n                            pet={pet}\r\n                            location={locations[pet.id]}\r\n                            onAdopt={navigateToAdoption}\r\n                            onFoster={navigateToFostering}\r\n                            onDistantAdopt={navigateToDistantAdoption}\r\n                        />\r\n                    ))}\r\n                </div>\r\n                {pets.length === 0 && !isLoading && (\r\n                    <div className=\"text-center mt-8 text-gray-600\">\r\n                        <p>\r\n                            Nu ai găsit ce cauți?{\" \"}\r\n                            <a href=\"/catalog\" className=\"text-green-600 font-semibold\">\r\n                                Vezi toate anunțurile\r\n                            </a>\r\n                        </p>\r\n                    </div>\r\n                )}\r\n                {isLoading && (\r\n                    <div className=\"text-center mt-8\">\r\n                        <Loader2 className=\"animate-spin h-8 w-8 mx-auto text-green-600\" />\r\n                        <p className=\"mt-2 text-gray-600\">Se încarcă rezultatele...</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AdoptionPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
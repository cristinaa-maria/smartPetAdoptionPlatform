{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cristina Aghei\\\\facultate\\\\licenta\\\\parteaPractica\\\\animals-shelter-app\\\\src\\\\components\\\\map.js\",\n  _s2 = $RefreshSig$();\nimport { useState, useEffect, useCallback } from \"react\";\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from \"react-leaflet\";\nimport \"leaflet/dist/leaflet.css\";\nimport L from \"leaflet\";\nimport { LogOut, PawPrint, Search, MapPin } from 'lucide-react';\nimport Button from \"./ui/Button\";\nimport Input from \"./ui/Input\";\nimport Label from \"./ui/Label\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/Card\";\n\n// Fix Leaflet icon issues\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ndelete L.Icon.Default.prototype._getIconUrl;\nL.Icon.Default.mergeOptions({\n  iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\n  iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\n  shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\n});\n\n// Icon pentru animale\nconst animalIcon = new L.Icon({\n  iconUrl: \"https://cdn-icons-png.flaticon.com/512/616/616430.png\",\n  iconSize: [30, 30],\n  iconAnchor: [15, 30],\n  popupAnchor: [0, -30]\n});\nconst ShelterMap = () => {\n  _s2();\n  var _s = $RefreshSig$();\n  const [animals, setAnimals] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [successMessage, setSuccessMessage] = useState(null);\n  const [mapCenter, setMapCenter] = useState([44.4268, 26.1025]); // București\n  const [zoomLevel, setZoomLevel] = useState(12);\n  const [searchAddress, setSearchAddress] = useState(\"\");\n  const API_BASE_URL = \"http://localhost:8083\";\n\n  // Calculăm raza bazată pe zoom\n  const calculateRadius = zoom => {\n    return Math.max(0.5, 50 / Math.pow(1.5, zoom - 5));\n  };\n\n  // Funcție pentru a obține animalele din apropiere\n  const fetchNearbyAnimals = useCallback(async (lat, lng, zoom) => {\n    setLoading(true);\n    setError(null);\n    try {\n      const radius = calculateRadius(zoom);\n      console.log(`Searching with radius: ${radius}km at [${lat}, ${lng}]`);\n\n      // Pasul 1: Obținem ID-urile utilizatorilor din apropiere\n      const nearbyResponse = await fetch(`${API_BASE_URL}/nearby`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          latitude: lat,\n          longitude: lng,\n          radius: radius\n        }),\n        credentials: \"include\"\n      });\n      if (!nearbyResponse.ok) {\n        throw new Error(`Failed to fetch nearby users: ${nearbyResponse.status}`);\n      }\n      const userIds = await nearbyResponse.json();\n      console.log(`Found ${userIds.length} nearby users`);\n      if (userIds.length === 0) {\n        setAnimals([]);\n        setLoading(false);\n        return;\n      }\n\n      // Pasul 2: Obținem animalele acestor utilizatori\n      const animalsResponse = await fetch(`${API_BASE_URL}/animalCatalog?userIds=${userIds.join(\",\")}`, {\n        method: \"GET\",\n        credentials: \"include\"\n      });\n      if (!animalsResponse.ok) {\n        throw new Error(`Failed to fetch animals: ${animalsResponse.status}`);\n      }\n      const animalsData = await animalsResponse.json();\n      console.log(`Found ${animalsData.length} animals`);\n      setAnimals(animalsData);\n      if (animalsData.length > 0) {\n        setSuccessMessage(`S-au găsit ${animalsData.length} animale în apropiere`);\n        setTimeout(() => setSuccessMessage(null), 3000);\n      } else {\n        setError(\"Nu s-au găsit animale în această zonă\");\n        setTimeout(() => setError(null), 3000);\n      }\n    } catch (err) {\n      console.error(\"Error fetching nearby data:\", err);\n      setError(\"Nu s-au putut încărca datele. Încercați din nou mai târziu.\");\n    } finally {\n      setLoading(false);\n    }\n  }, [API_BASE_URL]);\n\n  // Inițializăm căutarea la prima încărcare\n  useEffect(() => {\n    fetchNearbyAnimals(mapCenter[0], mapCenter[1], zoomLevel);\n  }, [fetchNearbyAnimals, mapCenter, zoomLevel]);\n\n  // Funcție pentru căutarea unei adrese\n  const searchByAddress = async e => {\n    e.preventDefault();\n    if (!searchAddress.trim()) return;\n    setLoading(true);\n    try {\n      // Folosim un serviciu de geocoding pentru a converti adresa în coordonate\n      // Exemplu cu Nominatim (OpenStreetMap)\n      const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchAddress)}`);\n      const data = await response.json();\n      if (data && data.length > 0) {\n        const {\n          lat,\n          lon\n        } = data[0];\n        setMapCenter([parseFloat(lat), parseFloat(lon)]);\n        // Actualizăm și în componenta MapController\n        if (mapRef.current) {\n          mapRef.current.setView([parseFloat(lat), parseFloat(lon)], zoomLevel);\n        }\n        fetchNearbyAnimals(parseFloat(lat), parseFloat(lon), zoomLevel);\n      } else {\n        setError(\"Adresa nu a putut fi găsită\");\n      }\n    } catch (err) {\n      console.error(\"Error searching address:\", err);\n      setError(\"Eroare la căutarea adresei\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Referință pentru hartă\n  const mapRef = React.useRef(null);\n\n  // Componenta pentru actualizarea centrului hărții și a nivelului de zoom\n  const MapController = () => {\n    _s();\n    const map = useMap();\n    mapRef.current = map;\n    useMapEvents({\n      moveend: () => {\n        const center = map.getCenter();\n        const newCenter = [center.lat, center.lng];\n        const newZoom = map.getZoom();\n\n        // Verificăm dacă centrul sau zoom-ul s-au schimbat semnificativ\n        if (Math.abs(newCenter[0] - mapCenter[0]) > 0.01 || Math.abs(newCenter[1] - mapCenter[1]) > 0.01 || newZoom !== zoomLevel) {\n          setMapCenter(newCenter);\n          setZoomLevel(newZoom);\n          fetchNearbyAnimals(center.lat, center.lng, newZoom);\n        }\n      }\n    });\n    return null;\n  };\n  _s(MapController, \"tmcOhplWkk/SgX5HNxHxB5dt97g=\", false, function () {\n    return [useMap, useMapEvents];\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"border-b\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container flex h-16 items-center justify-between px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/home\",\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(PawPrint, {\n            className: \"h-6 w-6 text-green-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xl font-bold\",\n            children: \"PetPal Adoptions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n          className: \"flex gap-6 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/home\",\n            children: \"Acas\\u0103\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/adoption\",\n            children: \"Adopt\\u0103 acum\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/editor_catalog\",\n            children: \"Adaug\\u0103 anun\\u021B adop\\u021Bie\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/info\",\n            children: \"\\xCEntreab\\u0103PetPal\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            className: \"text-sm font-medium hover:text-green-600 transition-colors\",\n            href: \"/community\",\n            children: \"Al\\u0103tur\\u0103-te comunit\\u0103\\u021Bii\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 195,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"flex items-center gap-1 text-sm font-medium text-red-600 hover:text-red-700 transition-colors ml-2\",\n            onClick: () => {\n              console.log(\"Logging out\");\n              window.location.href = \"/login\";\n            },\n            children: [/*#__PURE__*/_jsxDEV(LogOut, {\n              className: \"h-4 w-4\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 29\n            }, this), \"Deconectare\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto px-4 py-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-3xl font-bold mb-6 text-center\",\n        children: \"Animale \\xEEn apropiere\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\",\n        children: [error, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"float-right font-bold\",\n          onClick: () => setError(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 21\n      }, this), successMessage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\",\n        children: [successMessage, /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"float-right font-bold\",\n          onClick: () => setSuccessMessage(null),\n          children: \"\\xD7\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 lg:grid-cols-3 gap-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"lg:col-span-2\",\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            className: \"mb-4\",\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                children: \"Hart\\u0103\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 237,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 236,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: [/*#__PURE__*/_jsxDEV(\"form\", {\n                onSubmit: searchByAddress,\n                className: \"flex gap-2 mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex-grow\",\n                  children: /*#__PURE__*/_jsxDEV(Input, {\n                    type: \"text\",\n                    placeholder: \"Caut\\u0103 o adres\\u0103...\",\n                    value: searchAddress,\n                    onChange: e => setSearchAddress(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 242,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 241,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Button, {\n                  type: \"submit\",\n                  disabled: loading,\n                  children: [/*#__PURE__*/_jsxDEV(Search, {\n                    className: \"h-4 w-4 mr-2\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 250,\n                    columnNumber: 41\n                  }, this), \"Caut\\u0103\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 249,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"h-[500px] rounded-lg overflow-hidden border\",\n                children: /*#__PURE__*/_jsxDEV(MapContainer, {\n                  center: mapCenter,\n                  zoom: zoomLevel,\n                  className: \"h-full w-full\",\n                  children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n                    url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",\n                    attribution: \"\\xA9 <a href=\\\"https://www.openstreetmap.org/copyright\\\">OpenStreetMap</a> contributors\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 261,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(MapController, {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 265,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(Marker, {\n                    position: mapCenter,\n                    children: /*#__PURE__*/_jsxDEV(Popup, {\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"text-center\",\n                        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                          children: \"Loca\\u021Bia curent\\u0103\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 271,\n                          columnNumber: 53\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          className: \"text-xs text-gray-500\",\n                          children: [mapCenter[0].toFixed(6), \", \", mapCenter[1].toFixed(6)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 272,\n                          columnNumber: 53\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 270,\n                        columnNumber: 49\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 269,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 268,\n                    columnNumber: 41\n                  }, this), animals.map(animal => {\n                    // Verificăm dacă animalul are coordonate valide\n                    const hasValidLocation = animal.location && animal.location.coordinates && animal.location.coordinates.length === 2;\n                    if (!hasValidLocation) return null;\n\n                    // Extragem coordonatele (inversate pentru Leaflet)\n                    const position = [animal.location.coordinates[1], animal.location.coordinates[0]];\n                    return /*#__PURE__*/_jsxDEV(Marker, {\n                      position: position,\n                      icon: animalIcon,\n                      children: /*#__PURE__*/_jsxDEV(Popup, {\n                        children: /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"text-center max-w-xs\",\n                          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                            className: \"font-bold text-lg\",\n                            children: animal.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 299,\n                            columnNumber: 61\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"text-sm text-gray-600\",\n                            children: animal.species\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 300,\n                            columnNumber: 61\n                          }, this), animal.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: animal.imageUrl || \"/placeholder.svg\",\n                            alt: animal.name,\n                            className: \"my-2 mx-auto rounded-lg max-h-32 object-cover\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 303,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"text-sm mt-2\",\n                            children: animal.description\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 310,\n                            columnNumber: 61\n                          }, this), animal.contact && /*#__PURE__*/_jsxDEV(\"p\", {\n                            className: \"text-sm mt-2\",\n                            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                              children: \"Contact:\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 314,\n                              columnNumber: 69\n                            }, this), \" \", animal.contact]\n                          }, void 0, true, {\n                            fileName: _jsxFileName,\n                            lineNumber: 313,\n                            columnNumber: 65\n                          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                            className: \"mt-2 bg-green-500 hover:bg-green-600 text-white py-1 px-3 rounded text-sm\",\n                            onClick: () => window.location.href = `/animal/${animal.id}`,\n                            children: \"Vezi detalii\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 318,\n                            columnNumber: 61\n                          }, this)]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 298,\n                          columnNumber: 57\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 297,\n                        columnNumber: 53\n                      }, this)\n                    }, animal.id, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 49\n                    }, this);\n                  })]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 256,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 255,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-2 text-sm text-gray-500\",\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Mut\\u0103 harta sau modific\\u0103 nivelul de zoom pentru a vedea animale din alte zone.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: [\"Raza de c\\u0103utare: ~\", calculateRadius(zoomLevel).toFixed(1), \" km\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 334,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Card, {\n            children: [/*#__PURE__*/_jsxDEV(CardHeader, {\n              children: /*#__PURE__*/_jsxDEV(CardTitle, {\n                children: [\"Animale g\\u0103site (\", animals.length, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 343,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 342,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n              children: loading ? /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-center py-4\",\n                children: \"Se \\xEEncarc\\u0103...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 37\n              }, this) : animals.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-center py-8\",\n                children: [/*#__PURE__*/_jsxDEV(MapPin, {\n                  className: \"h-12 w-12 mx-auto text-gray-400 mb-2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500\",\n                  children: \"Nu s-au g\\u0103sit animale \\xEEn aceast\\u0103 zon\\u0103.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-gray-500 text-sm mt-2\",\n                  children: \"\\xCEncerca\\u021Bi s\\u0103 m\\u0103ri\\u021Bi raza de c\\u0103utare sau s\\u0103 v\\u0103 deplasa\\u021Bi \\xEEn alt\\u0103 zon\\u0103.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 352,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"space-y-4 max-h-[600px] overflow-y-auto pr-2\",\n                children: animals.map(animal => /*#__PURE__*/_jsxDEV(Card, {\n                  className: \"overflow-hidden\",\n                  children: [animal.imageUrl && /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: animal.imageUrl || \"/placeholder.svg?height=200&width=200\",\n                    alt: animal.name,\n                    className: \"w-full h-40 object-cover\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 359,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(CardContent, {\n                    className: \"p-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                      className: \"text-xl font-bold\",\n                      children: animal.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 366,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm text-gray-500\",\n                      children: animal.species\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 367,\n                      columnNumber: 53\n                    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"mt-2 text-sm line-clamp-2\",\n                      children: animal.description\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 368,\n                      columnNumber: 53\n                    }, this), animal.place && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm mt-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Loca\\u021Bie:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 372,\n                        columnNumber: 61\n                      }, this), \" \", animal.place]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 371,\n                      columnNumber: 57\n                    }, this), animal.contact && /*#__PURE__*/_jsxDEV(\"p\", {\n                      className: \"text-sm mt-2\",\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        children: \"Contact:\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 378,\n                        columnNumber: 61\n                      }, this), \" \", animal.contact]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 377,\n                      columnNumber: 57\n                    }, this), /*#__PURE__*/_jsxDEV(Button, {\n                      className: \"w-full mt-3\",\n                      onClick: () => window.location.href = `/animal/${animal.id}`,\n                      children: \"Vezi detalii\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 382,\n                      columnNumber: 53\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 49\n                  }, this)]\n                }, animal.id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 357,\n                  columnNumber: 45\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 355,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 345,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 175,\n    columnNumber: 9\n  }, this);\n};\n_s2(ShelterMap, \"7NN54/PQ77YLbIsx7iSq8GBgUPM=\");\n_c = ShelterMap;\nexport default ShelterMap;\nvar _c;\n$RefreshReg$(_c, \"ShelterMap\");","map":{"version":3,"names":["useState","useEffect","useCallback","MapContainer","TileLayer","Marker","Popup","useMapEvents","useMap","L","LogOut","PawPrint","Search","MapPin","Button","Input","Label","Card","CardContent","CardHeader","CardTitle","jsxDEV","_jsxDEV","Icon","Default","prototype","_getIconUrl","mergeOptions","iconRetinaUrl","iconUrl","shadowUrl","animalIcon","iconSize","iconAnchor","popupAnchor","ShelterMap","_s2","_s","$RefreshSig$","animals","setAnimals","loading","setLoading","error","setError","successMessage","setSuccessMessage","mapCenter","setMapCenter","zoomLevel","setZoomLevel","searchAddress","setSearchAddress","API_BASE_URL","calculateRadius","zoom","Math","max","pow","fetchNearbyAnimals","lat","lng","radius","console","log","nearbyResponse","fetch","method","headers","body","JSON","stringify","latitude","longitude","credentials","ok","Error","status","userIds","json","length","animalsResponse","join","animalsData","setTimeout","err","searchByAddress","e","preventDefault","trim","response","encodeURIComponent","data","lon","parseFloat","mapRef","current","setView","React","useRef","MapController","map","moveend","center","getCenter","newCenter","newZoom","getZoom","abs","className","children","href","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","location","onSubmit","type","placeholder","value","onChange","target","disabled","url","attribution","position","toFixed","animal","hasValidLocation","coordinates","icon","name","species","imageUrl","src","alt","description","contact","id","place","_c","$RefreshReg$"],"sources":["C:/Users/Cristina Aghei/facultate/licenta/parteaPractica/animals-shelter-app/src/components/map.js"],"sourcesContent":["import { useState, useEffect, useCallback } from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Popup, useMapEvents, useMap } from \"react-leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\nimport L from \"leaflet\";\r\nimport { LogOut, PawPrint, Search, MapPin } from 'lucide-react';\r\nimport Button from \"./ui/Button\";\r\nimport Input from \"./ui/Input\";\r\nimport Label from \"./ui/Label\";\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/Card\";\r\n\r\n// Fix Leaflet icon issues\r\ndelete L.Icon.Default.prototype._getIconUrl;\r\nL.Icon.Default.mergeOptions({\r\n    iconRetinaUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png\",\r\n    iconUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png\",\r\n    shadowUrl: \"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png\"\r\n});\r\n\r\n// Icon pentru animale\r\nconst animalIcon = new L.Icon({\r\n    iconUrl: \"https://cdn-icons-png.flaticon.com/512/616/616430.png\",\r\n    iconSize: [30, 30],\r\n    iconAnchor: [15, 30],\r\n    popupAnchor: [0, -30]\r\n});\r\n\r\nconst ShelterMap = () => {\r\n    const [animals, setAnimals] = useState([]);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n    const [successMessage, setSuccessMessage] = useState(null);\r\n    const [mapCenter, setMapCenter] = useState([44.4268, 26.1025]); // București\r\n    const [zoomLevel, setZoomLevel] = useState(12);\r\n    const [searchAddress, setSearchAddress] = useState(\"\");\r\n\r\n    const API_BASE_URL = \"http://localhost:8083\";\r\n\r\n    // Calculăm raza bazată pe zoom\r\n    const calculateRadius = (zoom) => {\r\n        return Math.max(0.5, 50 / Math.pow(1.5, zoom - 5));\r\n    };\r\n\r\n    // Funcție pentru a obține animalele din apropiere\r\n    const fetchNearbyAnimals = useCallback(async (lat, lng, zoom) => {\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        try {\r\n            const radius = calculateRadius(zoom);\r\n            console.log(`Searching with radius: ${radius}km at [${lat}, ${lng}]`);\r\n\r\n            // Pasul 1: Obținem ID-urile utilizatorilor din apropiere\r\n            const nearbyResponse = await fetch(`${API_BASE_URL}/nearby`, {\r\n                method: \"POST\",\r\n                headers: {\r\n                    \"Content-Type\": \"application/json\",\r\n                },\r\n                body: JSON.stringify({\r\n                    latitude: lat,\r\n                    longitude: lng,\r\n                    radius: radius\r\n                }),\r\n                credentials: \"include\",\r\n            });\r\n\r\n            if (!nearbyResponse.ok) {\r\n                throw new Error(`Failed to fetch nearby users: ${nearbyResponse.status}`);\r\n            }\r\n\r\n            const userIds = await nearbyResponse.json();\r\n            console.log(`Found ${userIds.length} nearby users`);\r\n\r\n            if (userIds.length === 0) {\r\n                setAnimals([]);\r\n                setLoading(false);\r\n                return;\r\n            }\r\n\r\n            // Pasul 2: Obținem animalele acestor utilizatori\r\n            const animalsResponse = await fetch(`${API_BASE_URL}/animalCatalog?userIds=${userIds.join(\",\")}`, {\r\n                method: \"GET\",\r\n                credentials: \"include\",\r\n            });\r\n\r\n            if (!animalsResponse.ok) {\r\n                throw new Error(`Failed to fetch animals: ${animalsResponse.status}`);\r\n            }\r\n\r\n            const animalsData = await animalsResponse.json();\r\n            console.log(`Found ${animalsData.length} animals`);\r\n            setAnimals(animalsData);\r\n\r\n            if (animalsData.length > 0) {\r\n                setSuccessMessage(`S-au găsit ${animalsData.length} animale în apropiere`);\r\n                setTimeout(() => setSuccessMessage(null), 3000);\r\n            } else {\r\n                setError(\"Nu s-au găsit animale în această zonă\");\r\n                setTimeout(() => setError(null), 3000);\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error fetching nearby data:\", err);\r\n            setError(\"Nu s-au putut încărca datele. Încercați din nou mai târziu.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [API_BASE_URL]);\r\n\r\n    // Inițializăm căutarea la prima încărcare\r\n    useEffect(() => {\r\n        fetchNearbyAnimals(mapCenter[0], mapCenter[1], zoomLevel);\r\n    }, [fetchNearbyAnimals, mapCenter, zoomLevel]);\r\n\r\n    // Funcție pentru căutarea unei adrese\r\n    const searchByAddress = async (e) => {\r\n        e.preventDefault();\r\n        if (!searchAddress.trim()) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            // Folosim un serviciu de geocoding pentru a converti adresa în coordonate\r\n            // Exemplu cu Nominatim (OpenStreetMap)\r\n            const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(searchAddress)}`);\r\n            const data = await response.json();\r\n\r\n            if (data && data.length > 0) {\r\n                const { lat, lon } = data[0];\r\n                setMapCenter([parseFloat(lat), parseFloat(lon)]);\r\n                // Actualizăm și în componenta MapController\r\n                if (mapRef.current) {\r\n                    mapRef.current.setView([parseFloat(lat), parseFloat(lon)], zoomLevel);\r\n                }\r\n                fetchNearbyAnimals(parseFloat(lat), parseFloat(lon), zoomLevel);\r\n            } else {\r\n                setError(\"Adresa nu a putut fi găsită\");\r\n            }\r\n        } catch (err) {\r\n            console.error(\"Error searching address:\", err);\r\n            setError(\"Eroare la căutarea adresei\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    // Referință pentru hartă\r\n    const mapRef = React.useRef(null);\r\n\r\n    // Componenta pentru actualizarea centrului hărții și a nivelului de zoom\r\n    const MapController = () => {\r\n        const map = useMap();\r\n        mapRef.current = map;\r\n\r\n        useMapEvents({\r\n            moveend: () => {\r\n                const center = map.getCenter();\r\n                const newCenter = [center.lat, center.lng];\r\n                const newZoom = map.getZoom();\r\n\r\n                // Verificăm dacă centrul sau zoom-ul s-au schimbat semnificativ\r\n                if (\r\n                    Math.abs(newCenter[0] - mapCenter[0]) > 0.01 ||\r\n                    Math.abs(newCenter[1] - mapCenter[1]) > 0.01 ||\r\n                    newZoom !== zoomLevel\r\n                ) {\r\n                    setMapCenter(newCenter);\r\n                    setZoomLevel(newZoom);\r\n                    fetchNearbyAnimals(center.lat, center.lng, newZoom);\r\n                }\r\n            }\r\n        });\r\n\r\n        return null;\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen\">\r\n            <header className=\"border-b\">\r\n                <div className=\"container flex h-16 items-center justify-between px-4\">\r\n                    <a href=\"/home\" className=\"flex items-center gap-2\">\r\n                        <PawPrint className=\"h-6 w-6 text-green-600\" />\r\n                        <span className=\"text-xl font-bold\">PetPal Adoptions</span>\r\n                    </a>\r\n                    <nav className=\"flex gap-6 items-center\">\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/home\">\r\n                            Acasă\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/adoption\">\r\n                            Adoptă acum\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/editor_catalog\">\r\n                            Adaugă anunț adopție\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/info\">\r\n                            ÎntreabăPetPal\r\n                        </a>\r\n                        <a className=\"text-sm font-medium hover:text-green-600 transition-colors\" href=\"/community\">\r\n                            Alătură-te comunității\r\n                        </a>\r\n                        <button\r\n                            className=\"flex items-center gap-1 text-sm font-medium text-red-600 hover:text-red-700 transition-colors ml-2\"\r\n                            onClick={() => {\r\n                                console.log(\"Logging out\")\r\n                                window.location.href = \"/login\"\r\n                            }}\r\n                        >\r\n                            <LogOut className=\"h-4 w-4\" />\r\n                            Deconectare\r\n                        </button>\r\n                    </nav>\r\n                </div>\r\n            </header>\r\n\r\n            <main className=\"container mx-auto px-4 py-8\">\r\n                <h1 className=\"text-3xl font-bold mb-6 text-center\">Animale în apropiere</h1>\r\n\r\n                {error && (\r\n                    <div className=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4\">\r\n                        {error}\r\n                        <button className=\"float-right font-bold\" onClick={() => setError(null)}>\r\n                            &times;\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                {successMessage && (\r\n                    <div className=\"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4\">\r\n                        {successMessage}\r\n                        <button className=\"float-right font-bold\" onClick={() => setSuccessMessage(null)}>\r\n                            &times;\r\n                        </button>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\r\n                    <div className=\"lg:col-span-2\">\r\n                        <Card className=\"mb-4\">\r\n                            <CardHeader>\r\n                                <CardTitle>Hartă</CardTitle>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                <form onSubmit={searchByAddress} className=\"flex gap-2 mb-4\">\r\n                                    <div className=\"flex-grow\">\r\n                                        <Input\r\n                                            type=\"text\"\r\n                                            placeholder=\"Caută o adresă...\"\r\n                                            value={searchAddress}\r\n                                            onChange={(e) => setSearchAddress(e.target.value)}\r\n                                        />\r\n                                    </div>\r\n                                    <Button type=\"submit\" disabled={loading}>\r\n                                        <Search className=\"h-4 w-4 mr-2\" />\r\n                                        Caută\r\n                                    </Button>\r\n                                </form>\r\n\r\n                                <div className=\"h-[500px] rounded-lg overflow-hidden border\">\r\n                                    <MapContainer\r\n                                        center={mapCenter}\r\n                                        zoom={zoomLevel}\r\n                                        className=\"h-full w-full\"\r\n                                    >\r\n                                        <TileLayer\r\n                                            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                                            attribution='&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n                                        />\r\n                                        <MapController />\r\n\r\n                                        {/* Marker pentru centrul hărții */}\r\n                                        <Marker position={mapCenter}>\r\n                                            <Popup>\r\n                                                <div className=\"text-center\">\r\n                                                    <p>Locația curentă</p>\r\n                                                    <p className=\"text-xs text-gray-500\">\r\n                                                        {mapCenter[0].toFixed(6)}, {mapCenter[1].toFixed(6)}\r\n                                                    </p>\r\n                                                </div>\r\n                                            </Popup>\r\n                                        </Marker>\r\n\r\n                                        {/* Markere pentru animale */}\r\n                                        {animals.map((animal) => {\r\n                                            // Verificăm dacă animalul are coordonate valide\r\n                                            const hasValidLocation = animal.location &&\r\n                                                animal.location.coordinates &&\r\n                                                animal.location.coordinates.length === 2;\r\n\r\n                                            if (!hasValidLocation) return null;\r\n\r\n                                            // Extragem coordonatele (inversate pentru Leaflet)\r\n                                            const position = [animal.location.coordinates[1], animal.location.coordinates[0]];\r\n\r\n                                            return (\r\n                                                <Marker\r\n                                                    key={animal.id}\r\n                                                    position={position}\r\n                                                    icon={animalIcon}\r\n                                                >\r\n                                                    <Popup>\r\n                                                        <div className=\"text-center max-w-xs\">\r\n                                                            <h3 className=\"font-bold text-lg\">{animal.name}</h3>\r\n                                                            <p className=\"text-sm text-gray-600\">{animal.species}</p>\r\n\r\n                                                            {animal.imageUrl && (\r\n                                                                <img\r\n                                                                    src={animal.imageUrl || \"/placeholder.svg\"}\r\n                                                                    alt={animal.name}\r\n                                                                    className=\"my-2 mx-auto rounded-lg max-h-32 object-cover\"\r\n                                                                />\r\n                                                            )}\r\n\r\n                                                            <p className=\"text-sm mt-2\">{animal.description}</p>\r\n\r\n                                                            {animal.contact && (\r\n                                                                <p className=\"text-sm mt-2\">\r\n                                                                    <strong>Contact:</strong> {animal.contact}\r\n                                                                </p>\r\n                                                            )}\r\n\r\n                                                            <button\r\n                                                                className=\"mt-2 bg-green-500 hover:bg-green-600 text-white py-1 px-3 rounded text-sm\"\r\n                                                                onClick={() => window.location.href = `/animal/${animal.id}`}\r\n                                                            >\r\n                                                                Vezi detalii\r\n                                                            </button>\r\n                                                        </div>\r\n                                                    </Popup>\r\n                                                </Marker>\r\n                                            );\r\n                                        })}\r\n                                    </MapContainer>\r\n                                </div>\r\n\r\n                                <div className=\"mt-2 text-sm text-gray-500\">\r\n                                    <p>Mută harta sau modifică nivelul de zoom pentru a vedea animale din alte zone.</p>\r\n                                    <p>Raza de căutare: ~{calculateRadius(zoomLevel).toFixed(1)} km</p>\r\n                                </div>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <Card>\r\n                            <CardHeader>\r\n                                <CardTitle>Animale găsite ({animals.length})</CardTitle>\r\n                            </CardHeader>\r\n                            <CardContent>\r\n                                {loading ? (\r\n                                    <p className=\"text-center py-4\">Se încarcă...</p>\r\n                                ) : animals.length === 0 ? (\r\n                                    <div className=\"text-center py-8\">\r\n                                        <MapPin className=\"h-12 w-12 mx-auto text-gray-400 mb-2\" />\r\n                                        <p className=\"text-gray-500\">Nu s-au găsit animale în această zonă.</p>\r\n                                        <p className=\"text-gray-500 text-sm mt-2\">Încercați să măriți raza de căutare sau să vă deplasați în altă zonă.</p>\r\n                                    </div>\r\n                                ) : (\r\n                                    <div className=\"space-y-4 max-h-[600px] overflow-y-auto pr-2\">\r\n                                        {animals.map((animal) => (\r\n                                            <Card key={animal.id} className=\"overflow-hidden\">\r\n                                                {animal.imageUrl && (\r\n                                                    <img\r\n                                                        src={animal.imageUrl || \"/placeholder.svg?height=200&width=200\"}\r\n                                                        alt={animal.name}\r\n                                                        className=\"w-full h-40 object-cover\"\r\n                                                    />\r\n                                                )}\r\n                                                <CardContent className=\"p-4\">\r\n                                                    <h3 className=\"text-xl font-bold\">{animal.name}</h3>\r\n                                                    <p className=\"text-sm text-gray-500\">{animal.species}</p>\r\n                                                    <p className=\"mt-2 text-sm line-clamp-2\">{animal.description}</p>\r\n\r\n                                                    {animal.place && (\r\n                                                        <p className=\"text-sm mt-2\">\r\n                                                            <strong>Locație:</strong> {animal.place}\r\n                                                        </p>\r\n                                                    )}\r\n\r\n                                                    {animal.contact && (\r\n                                                        <p className=\"text-sm mt-2\">\r\n                                                            <strong>Contact:</strong> {animal.contact}\r\n                                                        </p>\r\n                                                    )}\r\n\r\n                                                    <Button\r\n                                                        className=\"w-full mt-3\"\r\n                                                        onClick={() => window.location.href = `/animal/${animal.id}`}\r\n                                                    >\r\n                                                        Vezi detalii\r\n                                                    </Button>\r\n                                                </CardContent>\r\n                                            </Card>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </CardContent>\r\n                        </Card>\r\n                    </div>\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default ShelterMap;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}